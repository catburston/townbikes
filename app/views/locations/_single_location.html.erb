<div class="row">
  <div class="large-12 columns">
    <div class="row collapse prefix-radius">
      <div class="small-8 columns">
      <h1>Address location</h1>
        <div style="width: 640px;">
          <div id="geolocation" style="width: 640px; height: 800px;"></div>
        </div>
      </div>
      <div class="small-4 columns">
        <ul class="no-bullet search-bicycle-results">
          <li>
            <span class="location-address">
              <div class="panel">
                <h3><small><%= location.address || location.result || location.search %></small></h3>
                <% location.user.bicycles.each do |bicycle| %>
                  <div class="panel callout">
                    <div class="row">
                      <div class="large-4 columns">
                        <% if bicycle.photo? %>
                          <%= image_tag(bicycle.photo_url(:minithumb), class: "th") %>
                        <% else %>
                          <%= image_tag("/assets/images/tandem-minithumb.png", class: "th") %>
                        <% end %>
                      </div>
                      <div class="large-8 columns">
                        <%= link_to "#{bicycle.manufacturer}, #{bicycle.bicycle_type}", bicycle_path(bicycle.id) %>
                        <br />
                        <%= bicycle.user.first_name %> <%= bicycle.user.last_name %>
                        <br />
                        â‚¬ <%= bicycle.daily_cost %> per day
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>
            </span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'geolocation'} }, function(){
    var marker = handler.addMarkers(<%= raw Location.markers(location) %>);
    handler.map.centerOn(marker[0]);
  });
</script>
